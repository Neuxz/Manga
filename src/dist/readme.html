<!DOCTYPE HTML>
<html>
<head>
<script>
    var properties = (function(locale, filter) {
        var values = {
            step1 : {
                de : "val1_de",
                en : "val1_en"
            },
            step2 : {
                de : "val2_de",
                en : "val2_en"
            }
        };
        return filter(values, Object.keys(values).every(function(key) {
            return locale in values[key];
        }) ? locale : "en");
    }(navigator.language.substring(0, 2), function(values, locale) {
        var result = {};
        Object.keys(values).forEach(function(key) {
            result[key] = values[key][locale];
        });
        return result;
    }));
    document.addEventListener("DOMContentLoaded", function() {
        Object.keys(properties).forEach(function(key) {
            var newChild = document.createElement("div")
            newChild.innerHTML = properties[key];
            document.querySelector("#content").appendChild(newChild);
        });
    });
</script>
</head>
<body id="content" />
</html>